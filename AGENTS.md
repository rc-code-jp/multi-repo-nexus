# AGENTS

目的
- このリポジトリは複数の子リポジトリを束ねる親ワークスペース。
- API と WEB フロントなど複数リポジトリを並列に配置して一括管理できる構成。
- `git/info/exclude` により子リポジトリを Git 管理から外しつつ、AI が参照できる状態を維持する。
- ルートにはビルド/テストの実行基盤は検出されていない。
- 子リポジトリで作業するエージェントの行動指針をここで管理する。
- AI-DLC や spec 駆動開発を進めやすくするため、ルート直下に AI エージェント用のファイルを配置する。

リポジトリ構成
- ルート配下: 複数の子リポジトリと共通メタ情報。
- 子リポジトリの概要は各 README.md または子側の AGENTS.md に記載する。
- 各子リポジトリは独自に build/lint/test のコマンドを持つ前提。
- 新しい子リポジトリを追加したらこのファイルに追記する。

対話と言語ルール
- AI との対話はすべて日本語で行う。
- ドキュメント、コメント、メッセージも原則日本語で記述する。
- 例外が必要な場合は、ユーザーに事前確認する。

一般的なコードスタイル
- 作業対象リポジトリのスタイルガイドに従う。
- 既存のファイル構成と書式を維持する。
- 最小限かつ目的に沿った変更のみ行う。

フォーマット
- プロジェクトのフォーマッタがあれば必ず従う。
- 指示がない限り大規模な整形は行わない。
- 近傍のインデントと行長に合わせる。
- 末尾の不要な空白は残さない。

型
- コードベースが要求する場合は明示的な型を付ける。
- `any` は必要時のみ使用する。
- 型は狭く、影響範囲を小さく保つ。
- 公開 API の型変更は慎重に行う。

命名
- 既存の命名規約に合わせる。
- 関数は動詞ベースで意図を明確にする。
- 型/クラスは名詞ベースで PascalCase を尊重する。
- 定数は既存の命名に合わせる (例: UPPER_SNAKE, camelCase)。

エラーハンドリング
- I/O・ネットワーク・パースなど境界で処理する。
- 早期リターンと明確な失敗メッセージを優先する。
- 失敗を握りつぶさない。
- 既存のエラーヘルパーがある場合はそれを使う。

ログ
- 既存のログ基盤を使用する。
- 過度なログ出力は避ける。
- 秘密情報や個人情報はログに出さない。

テスト
- 決定的で高速なテストを保つ。
- 既存のテスト構成と記述スタイルに合わせる。
- 振る舞い変更やバグ修正にはテストを追加する。

ドキュメント
- 振る舞い変更時は README.md や関連ドキュメントも更新する。
- ドキュメントは簡潔かつ正確に保つ。

依存関係
- 不要な依存追加は避ける。
- 追加が必要な場合は理由を明記する。

Git 運用
- 秘密情報や `.env` をコミットしない。
- 変更はタスクに関連する範囲に限定する。
- コミットやリリース手順は事前に確認する。

子リポジトリの扱い
- 各子フォルダは独立したリポジトリとして扱う。
- どのリポジトリを対象にするか事前確認する。
- ツール類が存在しない場合はユーザーに確認する。

迷ったとき
- 正しいコマンドやスタイルはユーザーに確認する。
- 推測で大きな変更を行わず、保守的に進める。
